<div class="book-details-container">

  <div class="navigation">
    <a class="nav-btn" routerLink="{{book?.id}}">๐กบ</a>
    <a class="nav-btn" routerLink="{{book?.id}}">๐กธ</a>
  </div>


  <div class="book">
    <div class="book-info">

      <!-- ุงููุณู ุงููููู -->
      <div class="right-section">

        <img [src]="getCoverImageUrl()" alt="" />

        <div class="button-container">
          <button class="btn btn-buy">
            <span class="text">ุดุฑุงุก ูุณุฎุฉ ูุฑููุฉ</span>
            <span class="icon">๐</span>
          </button>

          <button class="btn btn-alert">
            <span class="text">ุฃุจูุบูู ุนูุฏ ุชููุฑู ูููุฑุงุกุฉ</span>
            <span class="icon">๐</span>
          </button>

          <button class="btn btn-review">
            <span class="text">ุฃุถู ูุฑุงุฌุนุชู</span>
            <span class="icon">โญ</span>
          </button>
        </div>


        <div class="book-price">
          <div class="before">
            <span>ูุจู : </span> <span class="old-price">{{ book?.price }} ุฌ.ู</span>
          </div>

          <div class="after">
            <span>ุจุนุฏ : </span> <span class="new-price"> {{newPrice}} ุฌ.ู</span>
          </div>

          <div class="discount">
            <span>ูุชููุฑ : {{discount | number:'1.1-1' }} ุฌ.ู</span>
            <span class="badge">ุฎุตู {{book?.discountPercentage }}%</span>
          </div>
        </div>



        <div class="notification-card">
          <div class="notification-item">
            <span class="iconWithText">
              <i class="fas fa-shuttle-van truck-icon"></i>


              <span> ุดุญู ูุฌุงูู </span>
            </span>
            <span class="highlight small-italic">ุจุญุฏ ุงุฏูู 600,00 ุฌ.ู</span>
          </div>

          <div class="notification-item">
            <span class="iconWithText">
              <i class="fas fa-shield-heart shield-icon"></i>
              <span> ุชุณูู ุขูู </span>
            </span>
            <span class="highlight small-italic">ุจูุงูุงุชู ูุญููุฉ ุฏุงุฆููุง</span>
          </div>
        </div>



      </div>


      <!-- ุงููุณู ุงููุต -->
      <div class="middle-section">

        <div class="book-title">
          <h3>{{book?.title}}</h3>
        </div>



      <div class="book-rating">

       <span class="stars">
          @for (star of stars; track star) {
            <i class="fa-star" [ngClass]="{
              'fas text-warning': star < (book?.rating || 0),
              'far text-secondary': star >= (book?.rating || 0)
            }"></i>
          }
        </span>


        <button class="heart-icon" (click)="toggleHeart()">
          <i [ngClass]="{ 'fas': isLiked, 'far': !isLiked }" class="fa-heart heart-icon"></i>
        </button>

      </div>



        <div class="recommendAndFollowButtons">
          <button class="custom-btn">
            <span class="btn-text">ูุชุงุจุนุฉ (2)</span>
            <span class="icon-box"><i class="fa-solid fa-circle-plus"></i></span>
          </button>

          <button class="custom-btn">
            <span class="btn-text">ุชุฑุดูุญ (2)</span>
            <span class="icon-box"><i class="fa-solid fa-book-open"></i></span>
          </button>
        </div>


        <div class="book-snip " *ngIf="book?.description">
          <h3 class="section-title">ูุจุฐุฉ ุนู ุงููุชุงุจ</h3>
          <p class="book-description">
            {{ book?.description }}
          </p>
        </div>


        <div class="author-snip">
          <h3 class="section-title">ูุจุฐุฉ ุนู ุงููุงุชุจ</h3>

          <div class="author-description">

            <div class="imageWithName">
              <img [src]="getCoverImageUrl()" alt="" class="author-image">
              <h5 class="author-name">{{book?.title}}</h5>
            </div>
            <p class="whoIsAuthor">{{book?.description}}</p>

            <div class="anotherBooksForAuthor">
              <h3 class="section-title">ุงุนูุงู ุงุฎุฑู ูููุงุชุจ</h3>

              <div class="AuthorBooks">

                <!-- looooooppppp -->

                @for (book of booksByAuthor; track book) {
                  <div class="bookaya">
                    <i class="fa fa-book-open"></i>
                    <a routerLink="/book-details/{{book.id}}" class="booksauthor">{{book.title}}</a>
                  </div>
                }


              </div>

            </div>

          </div>

        </div>

      </div>

      <!-- ุงููุณู ุงูุดูุงู -->
      <div class="left-section">
        <div class="mb-4">

          <div class="book-container">
            <table class="book-table">
              <tbody>
                <tr><th>ุงููุคูููู</th><td>{{book?.authorName}}</td></tr>

                <!-- ูุงูุตูู ุงูุฎุงูู ุฏู -->
                <tr><th>ุงููุชุฑุฌู</th><td>ูุงุทูุฉ ุฃุญูุฏ</td></tr>

                <tr><th>ุงูุตูุญุงุช</th><td>{{book?.pageCount}}</td></tr>
                <tr><th>ุณูุฉ ุงููุดุฑ</th><td>{{book?.publishedDate}}</td></tr>
                <tr><th>ุงูุตูุบุฉ</th><td>{{book?.format}}</td></tr>


                <tr><th>ููุน ุงูุบูุงู</th><td>{{book?.format}}</td></tr>


                <tr><th>ุฏุงุฑ ุงููุดุฑ</th><td>{{book?.publisherId}}</td></tr>
                <tr><th>ุงูุฃูุณุงู</th><td>{{book?.categoryIds}}</td></tr>


                <tr><th>ISBN</th><td>{{book?.isbn}}</td></tr>
                <tr><th>ูุฑุงุช ุงููุฑุงุกุฉ</th><td>{{book?.stockQuantity}}</td></tr>
                <tr><th>ุฑุงุจุท ูุฎุชุตุฑ</th><td><a routerLink="/book-details/{{book?.id}}" class="text-decoration-none">{{book?.title}} <i class="fa-solid fa-link"></i></a></td></tr>
                <tr>
                  <th>ูุดุงุฑูุฉ</th>
                  <td>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>


        </div>



        <!--  ุงูุฃูุณุงู -->
        <div class="shadow-sm maincat">
          <div class="p-0 cat">
            <h5 class="mb-3 text-muted text-center">ุงูุฃูุณุงู</h5>
            <ul class="list-group list-group-flush">
              <li class="list-group-item category-item">
                ุฑูุงูุงุช <span class="badge bg-light text-danger">12,983</span>
              </li>
              <li class="list-group-item category-item">
                ูุชุจ ูุชููุนุฉ <span class="badge bg-light text-danger">10,071</span>
              </li>
              <li class="list-group-item category-item">
                English Books <span class="badge bg-light text-danger">6,956</span>
              </li>
              <li class="list-group-item category-item">
                ูุณู ุงูุฃุทูุงู <span class="badge bg-light text-danger">6,558</span>
              </li>
              <li class="list-group-item category-item">
                ูุชุฑุฌูุงุช <span class="badge bg-light text-danger">4,462</span>
              </li>
              <li class="list-group-item category-item">
                Children books <span class="badge bg-light text-danger">3,332</span>
              </li>
              <li class="list-group-item category-item">
                Novels <span class="badge bg-light text-danger">3,288</span>
              </li>
              <li class="list-group-item category-item">
                ูุชุจ ุฐุงุชูุฉ ูุนูู ููุณ <span class="badge bg-light text-danger">2,678</span>
              </li>
              <li class="list-group-item category-item">
                ุชุงุฑูุฎ <span class="badge bg-light text-danger">2,545</span>
              </li>
            </ul>

              <button class="btn btn-danger btn-sm">ุงููุฒูุฏ ูู ุงูุฃูุณุงู</button>
          </div>
        </div>
      </div>


    </div>
  </div>


  <div class="allbooks py-5">
    <app-book-page [title]="'ูุชุจ ูุดุงุจูู'"></app-book-page>
  </div>


  <div class="reviewsAndComments py-5 px-3">

    <div class="allrev">
      <h3 class="mb-4">ุชููููุงุช ููุฑุงุฌุนุงุช ({{book?.title}})</h3>
      <button class="custom-btn brev">
        <span class="btn-text">ุงูุชุจุงุณุงุช ูู {{book?.title}}</span>
        <span class="icon-box"><i class="fas fa-star-half-alt"></i></span>
      </button>

      <button class="custom-btn brev">
        <span class="btn-text"> ูุฑุงุฌุนุงุช ูู {{book?.title}}</span>
        <span class="icon-box"><i class="fas fa-comment-alt"></i></span>
      </button>
    </div>


    <!-- tab-navigation.component.html -->
    <div class="tabs-container">
      <div class="tabs">
        <button
          [class.active]="activeTab === 'reviews'"
          (click)="selectTab('reviews')">
          <span> <i class="fa-solid fa-book-bookmark	 text-primary"></i> ูุฑุงุฌุนุงุช</span>
          <span>5</span>
          </button>

        <button
          [class.active]="activeTab === 'quotes'"
          (click)="selectTab('quotes')">
          <span> <i class="fas fa-quote-right text-success"></i> ุงูุชุจุงุณุงุช</span>
          <span>5</span>
          </button>

        <button
          [class.active]="activeTab === 'readers'"
          (click)="selectTab('readers')">
          <span> <i class="fas fa-user-tie 	text-secondary	 "></i> ุงููุฑูุงุก </span>
          <span>5</span>
          </button>
      </div>


      <div class="tab-content">
        <div *ngIf="activeTab === 'reviews'">

          <div class="reviews-container">


            <div class="review-box">

              <h2>ูุฑุงุฌุนุงุช ุงูุนููุงุก</h2>
              <div class="overall-rating">
                <span class="stars">
                  @for (star of [1,2,3,4,5]; track star) {
                    <i class="fa fa-star" [class.inactive]="star >= averageRating"></i>
                  }
                </span>
                <span>{{ averageRating }}/5 ูู {{ totalReviews }} ูุฑุงุฌุนุงุช</span>
              </div>

              <div class="rating-bars">
                @for (level of [5,4,3,2,1]; track level) {
                  <div>
                    <span class="star">  {{ level }}</span>
                    <i class="fas fa-star text-warning"></i>
                    <div class="bar">
                      <div class="fill" [style.width.%]="getRatingPercentage(level)"></div>
                    </div>
                    <span>% {{ getRatingPercentage(level) }}</span>
                  </div>
                }
              </div>

              <div class="submit-review">
                <h3>ูููู ุงููุชุงุจ</h3>
                <p>ุดุงุฑููุง ุฑุฃูู ูุชููููู ูููุชุงุจ.</p>
                <button (click)="addReview()" class="classbtn">ุฃุถู ูุฑุงุฌุนุชู</button>
              </div>
            </div>


            <div class="alert">
              โ ูุง ุชูุฌุฏ ูุฑุงุฌุนุงุช ุจุนุฏ. ูู ุตุงุญุจ ุฃูู ูุฑุงุฌุนุฉ ูุงูุชุจ ูุฑุงุฌุนุชู ุงูุขู.
            </div>

          </div>




        </div>

        <div *ngIf="activeTab === 'quotes'" class="quotes-container">
          <button class="classbtn">ุฃุถู ุงูุชุจุงุณ</button>
          <div class="alert"> โ ูุง ุชูุฌุฏ ุงูุชุจุงุณุงุช ุจุนุฏ. ูู ุตุงุญุจ ุฃูู ุงูุชุจุงุณ ูุงูุชุจ ุงูุชุจุงุณู ุงูุขู</div>
        </div>

        <div *ngIf="activeTab === 'readers'" class="pt-2 d-flex justify-content-center align-items-center">
          <div class="alert">
            โ ูุง ุชูุฌุฏ ูุฑุงุก ุจุนุฏ
          </div>
          </div>
      </div>
    </div>


  </div>

</div>


