<div class="book-details-container">
  <div class="navigation">
    <a class="nav-btn" routerLink="{{book?.id}}">ü°∫</a>
    <a class="nav-btn" routerLink="{{book?.id}}">ü°∏</a>
  </div>

  <div class="book">
    <div class="book-info">
      <!-- ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑŸäŸÖŸäŸÜ -->
      <div class="right-section">
        <img [src]="getCoverImageUrl()" alt="" />

        <div class="button-container">
          <button class="btn btn-buy">
            <span class="text">{{'bookDetails.buyPaperCopy' | translate}}</span>
            <span class="icon">üõí</span>
          </button>

          <button class="btn btn-alert">
            <span class="text">{{'bookDetails.notifyWhenAvailable' | translate}}</span>
            <span class="icon">üìñ</span>
          </button>

          <button class="btn btn-review">
            <span class="text">{{'bookDetails.addReview' | translate}}</span>
            <span class="icon">‚≠ê</span>
          </button>
        </div>

        <div class="book-price">
          <div class="before">
            <span>{{'bookDetails.before' | translate}} </span>
            <span class="old-price">{{ book?.price }} ÿ¨.ŸÖ</span>
          </div>

          <div class="after">
            <span>{{'bookDetails.after' | translate}} </span>
            <span class="new-price"> {{newPrice}} ÿ¨.ŸÖ</span>
          </div>

          <div class="discount">
            <span>{{'bookDetails.youWillSave' | translate}} {{discount | number:'1.1-1' }} ÿ¨.ŸÖ</span>
            <span class="badge">{{'bookDetails.discount' | translate}} {{book?.discountPercentage }}%</span>
          </div>
        </div>

        <div class="notification-card">
          <div class="notification-item">
            <span class="iconWithText">
              <i class="fas fa-shuttle-van truck-icon"></i>
              <span> {{'bookDetails.freeShipping' | translate}} </span>
            </span>
            <span class="highlight small-italic">{{'bookDetails.minimumOrder' | translate}}</span>
          </div>

          <div class="notification-item">
            <span class="iconWithText">
              <i class="fas fa-shield-heart shield-icon"></i>
              <span> {{'bookDetails.secureShopping' | translate}} </span>
            </span>
            <span class="highlight small-italic">{{'bookDetails.dataProtected' | translate}}</span>
          </div>
        </div>
      </div>

      <!-- ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑŸÜÿµ -->
      <div class="middle-section">
        <div class="book-title">
          <h3>{{book?.title}}</h3>
        </div>

        <div class="book-rating">
          <span class="stars">
            @for (star of stars; track star) {
              <i class="fa-star" [ngClass]="{
                'fas text-warning': star < (book?.rating || 0),
                'far text-secondary': star >= (book?.rating || 0)
              }"></i>
            }
          </span>

          <button class="heart-icon" (click)="toggleHeart()">
            <i [ngClass]="{ 'fas': isLiked, 'far': !isLiked }" class="fa-heart heart-icon"></i>
          </button>
        </div>

        <div class="recommendAndFollowButtons">
          <button class="custom-btn">
            <span class="btn-text">{{'bookDetails.follow' | translate}} (2)</span>
            <span class="icon-box"><i class="fa-solid fa-circle-plus"></i></span>
          </button>

          <button class="custom-btn">
            <span class="btn-text">{{'bookDetails.recommend' | translate}} (2)</span>
            <span class="icon-box"><i class="fa-solid fa-book-open"></i></span>
          </button>
        </div>

        <div class="book-snip" *ngIf="book?.description">
          <h3 class="section-title">{{'bookDetails.aboutBook' | translate}}</h3>
          <div class="gg"></div>
          <p class="book-description">{{ book?.description }}</p>
        </div>

        <div class="author-snip">
          <h3 class="section-title">{{'bookDetails.aboutAuthor' | translate}}</h3>
          <div class="gg"></div>

          <div class="author-description">
            <a routerLink="/authors/{{author.id}}" class="text-dark cc">
              <div class="imageWithName">
                <img [src]="getAuthorCoverImageUrl()" alt="" class="author-image">
                <h5 class="author-name">{{author.name}}</h5>
              </div>
            </a>
            <p class="whoIsAuthor">{{author.bio}}</p>

            <div class="anotherBooksForAuthor">
              <h3 class="section-title">{{'bookDetails.otherWorks' | translate}}</h3>

              <div class="AuthorBooks">
                @for (book of booksByAuthor; track book) {
                  <div class="bookaya">
                    <i class="fa fa-book-open"></i>
                    <a routerLink="/book-details/{{book.id}}" class="booksauthor">{{book.title}}</a>
                  </div>
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ¥ŸÖÿßŸÑ -->
      <div class="left-section">
        <div class="mb-4">
          <div class="book-container">
            <table class="book-table">
              <tbody>
                <tr><th>{{'bookDetails.authors' | translate}}</th><td>{{book?.authorName}}</td></tr>
                <tr><th>{{'bookDetails.translator' | translate}}</th><td>ŸÅÿßÿ∑ŸÖÿ© ÿ£ÿ≠ŸÖÿØ</td></tr>
                <tr><th>{{'bookDetails.pages' | translate}}</th><td>{{book?.pageCount}}</td></tr>
                <tr><th>{{'bookDetails.publishYear' | translate}}</th><td>{{book?.publishedDate}}</td></tr>
                <tr><th>{{'bookDetails.format' | translate}}</th><td>{{book?.format}}</td></tr>
                <tr><th>{{'bookDetails.coverType' | translate}}</th><td>{{book?.format}}</td></tr>
                <tr><th>{{'bookDetails.publisher' | translate}}</th><td>{{book?.publisherId}}</td></tr>
                <tr><th>{{'bookDetails.categories' | translate}}</th><td>{{book?.categoryIds}}</td></tr>
                <tr><th>ISBN</th><td>{{book?.isbn}}</td></tr>
                <tr><th>{{'bookDetails.readCount' | translate}}</th><td>{{book?.stockQuantity}}</td></tr>
                <tr><th>{{'bookDetails.shortLink' | translate}}</th><td><a routerLink="/book-details/{{book?.id}}" class="text-decoration-none">{{book?.title}} <i class="fa-solid fa-link"></i></a></td></tr>
                <tr>
                  <th>{{'bookDetails.share' | translate}}</th>
                  <td>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ -->
        <div class="shadow-sm maincat">
          <div class="p-0 cat">
            <h5 class="mb-3 text-muted text-center">{{'bookDetails.categories' | translate}}</h5>
            <ul class="list-group list-group-flush w-75">
              @for (category of categories; track category.id) {
                <a routerLink="/MainFilterContainer/{{category.id}}" class="category-itesm">
                  <li class="list-group-item category-item">
                    {{category.name}} <span class="badge bg-light text-danger">12,983</span>
                  </li>
                </a>
              }

            </ul>

            <button class="btn btn-danger btn-sm">{{'bookDetails.moreCategories'| translate}}</button>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="allbooks py-5">
    <app-book-page [title]="'bookDetails.similarBooks' | translate"></app-book-page>
  </div>

  <app-reviews-and-comments [book]="book"></app-reviews-and-comments>
</div>
