<div id="cartPage">
    <div id="NavCrumb">
        <app-nav-crumb [Navcrumbs]="breadcrumbs"></app-nav-crumb>
    </div>

    
       @if (cartData.items.length === 0) {
            <div class="empty-cart">
                <h2>ุณูุฉ ุงููุดุชุฑูุงุช ูุงุฑุบุฉ</h2>
                <a routerLink="/MainFilterContainer" routerLinkActive="active">
                   <button>ููููู ุงูุชุณูู ุงูุงู</button>
                </a>
            </div>
        }  
        @else{

        <div id="bigContainer">
            <h2 id="main-title">ุณูุฉ ุงููุดุชุฑูุงุช</h2>

            <div id="cart">
                <div id="cartItems">
                    <div id="topDiv">
                        <h4> ุงูููุชุฌุงุช  ({{ (cartData.totalItemsCount) }})</h4> 
                        <button id="clearCartBtn" (click)="clearCart()"> ุญุฐู ูู ุงูููุชุฌุงุช ูู ุงูุณูุฉ</button>
                    </div>

                    @for(item of items;track item.bookId) {
                        <div class="itemContainer">
                            <div class="BookInfo">
                                <img id="BookCover" [src]="getCoverImageUrl(item)" alt="BookImage">
                                <span class="Book"> ูุชุงุจ</span>
                                <span class="BookTitle">{{item.bookTitle}}</span><!-- change this -->
                            </div>

                            <div class="PriceAndQuantity">

                                <div class="priceDetails">
                                    <span class="PriceBeforeDiscount">{{item.totalPrice |customCurrencyPipe:'EGP' }}</span>
                                    <span class="PriceAfterDiscount">{{item.totalDiscountedPrice|customCurrencyPipe:'EGP' }}</span>
                                    <span class="DiscountPercentage">
                                        <span class="DiscountText">ุจุนุฏ ุฎุตู</span>
                                        <span class="DiscountValue">{{item.discountPercentage}}%</span>
                                    </span>
                                </div>

                                <div class="Quantity">
                                    <span class="QuantityText"> ุงููููุฉ :</span>
                                    <input class="QuantityInput" type="number" #quantityInput  [value]="item.quantity" min="1"><!-- change this value -->
                                    <button class="UpdateBtn" (click)="updateItemQuantity(item.bookId, quantityInput)">
                                        ุชุญุฏูุซ
                                    </button>
                                    <button class="DeleteBtn"  (click)="deleteItem(item.bookId)">ุญุฐู</button>

                                </div>

                            </div>
                     </div>
                    }

                </div>

                <div id="leftSide">
                    <div id="priceSummary">
                        <div class="price" id="BeforeDiscount">
                            <span class="priceTitle">ุงููุฌููุน ูุจู ุงูุฎุตู</span>
                            <span class="priceValue">{{cartData.sumTotalPrice |customCurrencyPipe:'EGP' }}</span><!-- change this -->
                        </div>

                        <div class="price">
                            <span class="priceTitle">ุงููุฌููุน ุจุนุฏ ุงูุฎุตู</span>
                            <span class="priceValue">{{cartData.sumDiscountedPrice|customCurrencyPipe:'EGP' }}</span><!-- change this -->
                        </div>

                        <!-- Free Shipping Message -->
                        <div class="free-shipping-info">
                            @if (cartData.sumDiscountedPrice >= 600) {
                                <div class="free-shipping-message qualified">
                                    <i class="fa-solid fa-truck"></i>
                                    <span>๐ ุชูุงูููุง! ุญุตูุช ุนูู ุดุญู ูุฌุงูู</span>
                                </div>
                            } @else {
                                <div class="free-shipping-message not-qualified">
                                    <i class="fa-solid fa-truck"></i>
                                    <span>ุฃุถู {{600 - cartData.sumDiscountedPrice |customCurrencyPipe:'EGP'}} ุฃุฎุฑู ููุญุตูู ุนูู ุดุญู ูุฌุงูู</span>
                                </div>
                            }
                        </div>

                    </div>

                    <div id="CustomerService">
                        <p>ุฅุฐุง ูุงุฌูุชู ุฃู ูุดููุฉ ููููู ุงูุชูุงุตู ูุน :</p>
                        <a id="CustomerServiceLink" routerLink="#" routerLinkActive="active">
                            <i id="icon" class="fa-solid fa-circle-user"></i>
                            <span>ุฎุฏูุฉ ุงูุนููุงุก</span>
                        </a>
                    </div>
                    
                </div>

            </div>

        </div>

            <div id="NextStep">
                <p id="lastPara">
                    <i class="fa-solid fa-arrow-down"></i>
                    ุงูุฎุทูุฉ ุงููุงุฏูุฉ ุนููุงู ุงูุดุญู ูุทุฑููุฉ ุงูุฏูุน
                </p>
                <button id="checkoutBtn" routerLink="/checkout">ุฅุชูุงู ุนูููุฉ ุงูุดุฑุงุก</button>
            </div>

    }
    
</div>



