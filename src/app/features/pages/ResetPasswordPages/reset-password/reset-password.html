<head>
    <link rel="stylesheet" href="reset-password.css">
</head>
<div class="reset-password-container">
  <!-- Logo -->
  <div class="logo-container">
    <div>
      <img src="/icons/logo.svg" alt="Logo" width="40" height="40" class="me-2">
    </div>
  </div>

  <!-- Reset Password Form Card -->
  <div class="reset-password-card">
    <div class="header">
      <h2>إعادة تعيين كلمة المرور</h2>
      <p>أدخل كلمة المرور الجديدة</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" class="reset-password-form">
      <!-- New Password Field -->
      <div class="form-group">
        <label for="newPassword" class="form-label">كلمة المرور الجديدة</label>
        <div class="password-input-container">
          <input
            id="newPassword"
            [type]="showNewPassword() ? 'text' : 'password'"
            class="form-control"
            [class.is-invalid]="newPasswordError()"
            formControlName="newPassword"
            placeholder="أدخل كلمة المرور الجديدة"
          >
          <button
            type="button"
            class="password-toggle"
            (click)="toggleNewPasswordVisibility()"
            [attr.aria-label]="showNewPassword() ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
          >
            @if (showNewPassword()) {
              <i class="bi bi-eye-slash"></i>
            } @else {
              <i class="bi bi-eye"></i>
            }
          </button>
        </div>
        @if (newPasswordError()) {
          <div class="invalid-feedback">{{ newPasswordError() }}</div>
        }
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">تأكيد كلمة المرور</label>
        <div class="password-input-container">
          <input
            id="confirmPassword"
            [type]="showConfirmPassword() ? 'text' : 'password'"
            class="form-control"
            [class.is-invalid]="confirmPasswordError()"
            formControlName="confirmPassword"
            placeholder="أعد إدخال كلمة المرور الجديدة"
          >
          <button
            type="button"
            class="password-toggle"
            (click)="toggleConfirmPasswordVisibility()"
            [attr.aria-label]="showConfirmPassword() ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
          >
            @if (showConfirmPassword()) {
              <i class="bi bi-eye-slash"></i>
            } @else {
              <i class="bi bi-eye"></i>
            }
          </button>
        </div>
        @if (confirmPasswordError()) {
          <div class="invalid-feedback">{{ confirmPasswordError() }}</div>
        }
      </div>

      <!-- Password Mismatch Error -->
      @if (form.touched && form.errors?.['passwordMismatch']) {
        <div class="alert alert-danger mt-3" role="alert">
          كلمات المرور غير متطابقة
        </div>
      }

      <!-- Error Message -->
      @if (errorMessage()) {
        <div class="alert alert-danger mt-3" role="alert">
          {{ errorMessage() }}
        </div>
      }

      <!-- Submit Button -->
      <button
        type="submit"
        class="btn  btn-submit"
        [disabled]="form.invalid || submitting()"
      >
        @if (submitting()) {
          <span class="spinner-border spinner-border-sm me-2" role="status"></span>
          جاري إعادة التعيين...
        } @else {
          إعادة تعيين كلمة المرور
        }
      </button>
    </form>
  </div>
</div>